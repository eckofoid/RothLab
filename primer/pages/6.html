<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<link rel="SHORTCUT ICON" href="../images/_nb_interface/favicon.ico">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<title>getfv</title>
<script language="Javascript" type="text/javascript" src="./notebook.js"></script>
<style type="text/css">div.notebookcell{ position:relative; }</style>
<style type="text/css">td.nbt { padding : 3px 0px 0px 0px; }</style>
<STYLE type="text/css">

	.pna0 {
		font-family : Helvetica,Arial,sans-serif;
		font-size : 20px;
		font-weight : bold;
		color : #000000;
	}


	.pnu0 {
		font-family : Helvetica,Arial,sans-serif;
		font-size : 14px;
		color : #000000;
	}


	.blankline {
		font-family : Helvetica,Arial,sans-serif;
		font-size : 14px;
		color : #000000;
		text-align : center;
	}


	.f0 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #faaa19;
	}


	.f1 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #000000;
	}


	.f2 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #d00811;
	}


	.f3 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #3200fd;
	}


	.f4 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #424242;
	}


	.f5 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #1e00a8;
	}


	.f6 {
		font-family : Monaco,Helvetica,Arial,sans-serif;
		font-size : 11px;
		color : #424242;
		text-decoration : underline;
	}


</STYLE>
</head>

<body bgcolor="#FFFFFF" topmargin="0" marginheight="0" leftmargin="0" marginwidth="0" onload="InitNotebookPage();">
<map id="tabmap" name="tabmap">
    <area shape="rect" coords="0,68,22,133" href="../index.html" alt="">
</map>
<map id="pagecurlltmap" name="pagecurlltmap">
    <area shape="poly" coords="0,1,22,23,0,29" href="./5.html"
          onmouseover="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt_ll.gif');SwapImage('pagecurl_rt', '../images/_nb_interface/pagecurlrt.gif');"
          onmouseout="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt.gif');"
          alt="">
    <area shape="poly" coords="0,0,22,0,22,22" href="../index.html"
          onmouseover="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt_ur.gif');SwapImage('pagecurl_rt', '../images/_nb_interface/pagecurlrt_ur.gif');"
          onmouseout="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt.gif');SwapImage('pagecurl_rt', '../images/_nb_interface/pagecurlrt.gif');"
          alt="">
</map>
<map id="pagecurlrtmap" name="pagecurlrtmap">
    <area shape="poly" coords="0,0,6,0,6,29,0,24" href="../index.html"
          onmouseover="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt_ur.gif');SwapImage('pagecurl_rt', '../images/_nb_interface/pagecurlrt_ur.gif');"
          onmouseout="SwapImage('pagecurl_lt', '../images/_nb_interface/pagecurllt.gif');SwapImage('pagecurl_rt', '../images/_nb_interface/pagecurlrt.gif');"
          alt="">
</map>
<!-- PAGE CONTENT -->

 <table summary="layout frame" border="0" cellspacing="0" cellpadding="0" width="100%" height="100%" background="../images/_nb_marginLines/swatchfefffe.png">
  <tr>
    <td width="15" background="../images/_nb_interface/noring.gif"><img src="../images/_nbs.gif" alt="" border="0" width="15" height="15"></td>
    
    <td width="1">
      <table summary="page holes" border="0" cellspacing="0" cellpadding="0" width="1" height="100%">
        <tr>
          <td height="33%" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="76"><br>
          </td>
        </tr>
        <tr>
          <td height="33%" valign="middle"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="200"><br>
          <br>
          <img src="../images/_nbs.gif" alt="" border="0" width="1" height="200"></td>
        </tr>
        <tr>
          <td height="33%" valign="bottom"><br>
          <img src="../images/_nbs.gif" alt="" border="0" width="1" height="50"></td>
        </tr>
      </table>    
    </td>
    <td width="100%" valign="top">
      <table summary="notebook topmargin" border="0" cellspacing="0" cellpadding="0" width="100%" height="60">
        <tr>
          <td width="20" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="20" height="1"></td>
          <td width="1"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="1"></td>
          <td width="4" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="4" height="1"></td>
          <td width="100%" valign="top" align="right" nowrap ><font class="pnu0">6</font><img src="../images/_nbs.gif" alt="" border="0" width="5" height="1"><img name="pagecurl_lt" src="../images/_nb_interface/pagecurllt.gif" alt="" border="0" width="23" height="33" usemap="#pagecurlltmap"><br>
          <img src="../images/_nbs.gif" alt="" border="0" width="540" height="1"></td>
        </tr>
      </table>
<table summary="notebook cell" border="0" cellspacing="0" cellpadding="0" width="100%">
    <tr>
      <td width="20" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="20" height="4"><br>
</td>
      
      
      <td width="4" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="4" height="1"></td>
      
      <td width="100%" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="4"><br>
<font class="pna0">getfv<br></font></td>
      
      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="1"></td>
    </tr>
</table>
<table summary="notebook cell" border="0" cellspacing="0" cellpadding="0" width="100%">
    <tr>
      <td width="20" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="20" height="1"></td>

       <td width="4" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="4" height="1"></td>
      
      <td valign="top"><nobr><img src="../images/_nbs.gif" width="13" height="13" border="0" alt=""></nobr></td>      <td width="100%" valign="top"></td>

      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="1"></td>
    </tr>
    <tr>
      <td colspan="2" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="24" height="4"></td>
      <td colspan="2" width="100%" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="4"></td>
      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="4"></td>
    </tr>
</table>
<table summary="notebook cell" border="0" cellspacing="0" cellpadding="0" width="100%">
    <tr>
      <td width="20" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="20" height="1"></td>

       <td width="4" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="4" height="1"></td>
      
      <td valign="top"><nobr><img src="../images/_nb_interface/Linked.png" width="13" height="13" border="0" alt=""><img src="../images/_nbs.gif" alt="" border="0" width="3" height="1"></nobr></td>      <td width="100%" valign="top"><font class="f0">#!/usr/bin/python</font><font class="f1"><br></font><font class="f0">#</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">Extracts FASTA records from multi-mapview file.</font><font class="f1"><br></font><font class="f2">Eric Kofoid, 1/24/2011 (start)</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5/25/2012 (most recent)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">############################################################</font><font class="f1"><br></font><font class="f2">Introduction</font><font class="f1"><br></font><font class="f2">============</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Based on code from a previous bash script, which worked well but was </font><font class="f1"><br></font><font class="f2">horribly slow!</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">This program extracts records from large multi-mapview files, based on</font><font class="f1"><br></font><font class="f2">ID, reference location or file line number. In all cases, single </font><font class="f1"><br></font><font class="f2">records or records within ranges can be found.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Incoming data is in a mapview multisequence files, whose tab-separated </font><font class="f1"><br></font><font class="f2">records have the general structure shown here:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">SOLEXA3_0001:8:8:7287:5069#0/1&nbsp;&nbsp;&nbsp;&nbsp;cbid&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;&nbsp;84&nbsp;&nbsp;&nbsp;&nbsp;84&nbsp;&nbsp;&nbsp;&nbsp;077&nbsp;&nbsp;&nbsp;&nbsp;TagCAtTGCaGCTCCTTAGCAATCTCGTCGACGGGACGATTACTGCCGAGAATATGGTTATCAAAAGAAAACAGGAT&nbsp;&nbsp;&nbsp;&nbsp;=6:=A4@@B0&lt;?&gt;&lt;C@BB@@@B@@DCCDCCDCCCCCCCCCCCCBCBCCCCCCCCCCCCCCCBBBBCCCCCCCCCCCC</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">where important fields are (1)ID, (2)reference, (3)position in </font><font class="f1"><br></font><font class="f2">reference, (15)sequence, and, (16)quality scores. These files are</font><font class="f1"><br></font><font class="f2">made presorted on the reference position and must be kept in this</font><font class="f1"><br></font><font class="f2">sort order.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Output is formatted as a multi-fasta file.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">############################################################</font><font class="f1"><br></font><font class="f2">Usage</font><font class="f1"><br></font><font class="f2">==================</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">$ getfv -i1 &lt;ID 1&gt; [-i2 &lt;ID 2&gt;] [-p &lt;period&gt;] [-v] &lt;infile&gt; &gt; &lt;outfile&gt;</font><font class="f1"><br></font><font class="f2">$ getfv -p1 &lt;pos. 1&gt; [-p2 &lt;pos. 2&gt;] [-p &lt;period&gt;] [-v] &lt;infile&gt; &gt; &lt;outfile&gt;</font><font class="f1"><br></font><font class="f2">$ getfv -l1 &lt;line 1&gt; [-l2 &lt;line 2&gt;] [-p &lt;period&gt;] [-v] &lt;infile&gt; &gt; &lt;outfile&gt;</font><font class="f1"><br></font><font class="f2">$ getfv -f &lt;ID file&gt; [-p &lt;period&gt;] [-v] &lt;infile&gt; &gt; &lt;outfile&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">############################################################</font><font class="f1"><br></font><font class="f2">Supported options</font><font class="f1"><br></font><font class="f2">=================</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Record ID range from id1 to id2. </font><font class="f1"><br></font><font class="f2">Useful only for files sorted on position:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-i1 &lt;first record ID &quot;id1&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-i2 &lt;last record ID &quot;id2&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Reference sequence range from position 1 to position 2.</font><font class="f1"><br></font><font class="f2">Useful only for files sorted on position:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-p1 &lt;first position &quot;pos1&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-p2 &lt;last position &quot;pos2&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Find records from line lin1 to lin2 of multi-mapview file.</font><font class="f1"><br></font><font class="f2">Mainly useful when records are sorted by position:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-l1 &lt;first line of block &quot;lin1&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-l2 &lt;last line of block &quot;lin2&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Use IDs found in ID file, one per line. Useful only when</font><font class="f1"><br></font><font class="f2">IDs all have identical prefices and records have been sorted </font><font class="f1"><br></font><font class="f2">on ID:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-i &lt;ID file &quot;idf&quot;&gt;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">If a single ID, position or line is need, then use the</font><font class="f1"><br></font><font class="f2">corresponding option with suffix &quot;1&quot;, and leave the &quot;2&quot;</font><font class="f1"><br></font><font class="f2">option blank.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Odometer period -- if set, every &quot;per&quot; records inspected</font><font class="f1"><br></font><font class="f2">will print the record number, if verbose output flag is set.</font><font class="f1"><br></font><font class="f2">If the option is give without a value, a default value of</font><font class="f1"><br></font><font class="f2">10000 will be used.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-p &lt;period &quot;per&quot;&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Verbose output flag -- if set, odometer will be activated,</font><font class="f1"><br></font><font class="f2">and it and a list of parameter values will be printed to</font><font class="f1"><br></font><font class="f2">standard output.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-v &lt;flag, &quot;True&quot; if present, &quot;False&quot; if not&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">Preserve mapview format flag -- if set, output will be saved</font><font class="f1"><br></font><font class="f2">in the original mapview format instead of being converted to</font><font class="f1"><br></font><font class="f2">multi-fasta.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">-V &lt;flag, &quot;True&quot; if present, &quot;False&quot; if not&gt;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">###########################################################</font><font class="f1"><br></font><font class="f2">Algorithm</font><font class="f1"><br></font><font class="f2">=========</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">1. get next target</font><font class="f1"><br></font><font class="f2">2. read next line from input file</font><font class="f1"><br></font><font class="f2">3. search for target in appropriate field</font><font class="f1"><br></font><font class="f2">4. return to 1 until target found or eof</font><font class="f1"><br></font><font class="f2">5. if target found, convert line to fasta format &amp; write to stdout</font><font class="f1"><br></font><font class="f2">6. return to 1 until target exceeds maximum</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">###########################################################</font><font class="f1"><br></font><font class="f2">Caveat</font><font class="f1"><br></font><font class="f2">======</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">This function does too much for a single tool.</font><font class="f1"><br></font><font class="f2">It should be split into the following:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">1. getvpos: get position range from view file</font><font class="f1"><br></font><font class="f2">2. getvlin: get line range from view file</font><font class="f1"><br></font><font class="f2">3. getvids: get ID range from view file</font><font class="f1"><br></font><font class="f2">4. getvmat: get ID matches from view file</font><font class="f1"><br></font><font class="f2">5. v2fa:&nbsp;&nbsp;&nbsp;&nbsp;convert .view to .fasta</font><font class="f1"><br></font><font class="f2"> </font><font class="f1"><br></font><font class="f2">###########################################################</font><font class="f1"><br></font><font class="f2">History</font><font class="f1"><br></font><font class="f2">======</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">5/25/2012 Added &quot;-V&quot; flag</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f3">from</font><font class="f4"> time </font><font class="f3">import</font><font class="f4"> time</font><font class="f1"><br></font><font class="f3">import</font><font class="f4"> os</font><font class="f1"><br></font><font class="f3">import</font><font class="f4"> sys</font><font class="f1"><br></font><font class="f3">import</font><font class="f4"> plac</font><font class="f1"><br></font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f0">###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function dmsg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;###</font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f3">def</font><font class="f4"> </font><font class="f5">dmsg</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;Print debug message to stderr</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f0">###&nbsp;&nbsp;&nbsp;function odometer&nbsp;&nbsp;&nbsp;&nbsp;###</font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f3">def</font><font class="f4"> </font><font class="f5">odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;Simple count-up odometer to keep user happy.</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">global</font><font class="f4"> a</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;a</font><font class="f3">=</font><font class="f4">a</font><font class="f3">+1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> v </font><font class="f3">and</font><font class="f4">&nbsp;&nbsp;</font><font class="f3">(</font><font class="f4">a </font><font class="f3">%</font><font class="f4"> per</font><font class="f3">)==0</font><font class="f4">: </font><font class="f0"># trigger odometer output</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cycle</font><font class="f3">=</font><font class="f4">str</font><font class="f3">(</font><font class="f4">a</font><font class="f3">)+</font><font class="f2">'&#092;r'</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">cycle</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f0">###&nbsp;&nbsp;&nbsp;&nbsp;function getinf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;###</font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f3">def</font><font class="f4"> </font><font class="f5">getinf</font><font class="f3">(</font><font class="f4">inf</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;Open an input file</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">try</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infile</font><font class="f3">=</font><font class="f4">open</font><font class="f3">(</font><font class="f4">inf</font><font class="f3">,</font><font class="f2">'r'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">return</font><font class="f4"> infile</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">except</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">ex1</font><font class="f3">,</font><font class="f4">ex2</font><font class="f3">,</font><font class="f6">ex3</font><font class="f3">=</font><font class="f4">sys.exc_info</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;Something went wrong opening the input data file!&#092;nException =&quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">ex2</font><font class="f3">)+</font><font class="f2">&quot;&#092;n&#092;n&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit</font><font class="f3">(1)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f0">###&nbsp;&nbsp;&nbsp;&nbsp;function getvid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;###</font><font class="f1"><br></font><font class="f0">##############################</font><font class="f1"><br></font><font class="f3">def</font><font class="f4"> </font><font class="f5">getvid</font><font class="f3">(</font><font class="f4">id1</font><font class="f3">,</font><font class="f4">id2</font><font class="f3">,</font><font class="f4">inf</font><font class="f3">,</font><font class="f4">per</font><font class="f3">=100000,</font><font class="f4">v</font><font class="f3">=False)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;Get an ID range from a .view file.</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Define a few constants:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;ID</font><font class="f3">=0</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">REF</font><font class="f3">=1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;POS</font><font class="f3">=2</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A4</font><font class="f3">=3</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A5</font><font class="f3">=4</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A6</font><font class="f3">=5</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A7</font><font class="f3">=6</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A8</font><font class="f3">=7</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A9</font><font class="f3">=8</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A10</font><font class="f3">=9</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A11</font><font class="f3">=10</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A12</font><font class="f3">=11</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A13</font><font class="f3">=12</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A14</font><font class="f3">=13</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;SEQ</font><font class="f3">=14</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">QUAL</font><font class="f3">=15</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;infile</font><font class="f3">=</font><font class="f4">getinf</font><font class="f3">(</font><font class="f4">inf</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># will be used to check eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">atedge</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> inrange:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> aLine:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=</font><font class="f4">id1 </font><font class="f3">in</font><font class="f4"> id</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">: </font><font class="f0"># eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=False</font><font class="f4"> </font><font class="f0"># just to drop through</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> inrange </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> atedge:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">SEQ</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> V: </font><font class="f0"># preserve the mapview format</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> aLine</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;&gt;&quot;</font><font class="f3">,</font><font class="f4">id</font><font class="f3">,</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">,</font><font class="f4">seq</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> aLine:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=(</font><font class="f4">id2 </font><font class="f3">in</font><font class="f4"> id</font><font class="f3">)</font><font class="f4"> </font><font class="f3">or</font><font class="f4"> </font><font class="f3">(</font><font class="f4">id1 </font><font class="f3">==</font><font class="f4"> id2</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">: </font><font class="f0"># eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># just to drop through</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;pastrange</font><font class="f3">=(</font><font class="f4">id1 </font><font class="f3">==</font><font class="f4"> id2</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> pastrange:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">SEQ</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> V: </font><font class="f0"># preserve the mapview format</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> aLine</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;&gt;&quot;</font><font class="f3">,</font><font class="f4">id</font><font class="f3">,</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">,</font><font class="f4">seq</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> aLine:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pastrange</font><font class="f3">=</font><font class="f4">id2 </font><font class="f3">not</font><font class="f4"> </font><font class="f3">in</font><font class="f4"> id</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">: </font><font class="f0"># eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pastrange</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># just to drop through</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">@plac.annotations</font><font class="f3">(</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;id1</font><font class="f3">=(</font><font class="f2">&quot;first id in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'i1'</font><font class="f3">,</font><font class="f4">str</font><font class="f3">,None,</font><font class="f2">'id1'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;id2</font><font class="f3">=(</font><font class="f2">&quot;last id in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'i2'</font><font class="f3">,</font><font class="f4">str</font><font class="f3">,None,</font><font class="f2">'id2'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;pos1</font><font class="f3">=(</font><font class="f2">&quot;first reference position in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'p1'</font><font class="f3">,</font><font class="f4">int</font><font class="f3">,None,</font><font class="f2">'pos1'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;pos2</font><font class="f3">=(</font><font class="f2">&quot;last reference position in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'p2'</font><font class="f3">,</font><font class="f4">int</font><font class="f3">,None,</font><font class="f2">'pos2'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;lin1</font><font class="f3">=(</font><font class="f2">&quot;first line position in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'l1'</font><font class="f3">,</font><font class="f4">int</font><font class="f3">,None,</font><font class="f2">'lin1'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;lin2</font><font class="f3">=(</font><font class="f2">&quot;last line position in range&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'l2'</font><font class="f3">,</font><font class="f4">int</font><font class="f3">,None,</font><font class="f2">'lin2'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;per</font><font class="f3">=(</font><font class="f2">&quot;odometer period&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'p'</font><font class="f3">,</font><font class="f4">int</font><font class="f3">,None,</font><font class="f2">'period'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;idf</font><font class="f3">=(</font><font class="f2">&quot;id file&quot;</font><font class="f3">,</font><font class="f2">'option'</font><font class="f3">,</font><font class="f2">'f'</font><font class="f3">,</font><font class="f4">str</font><font class="f3">,None,</font><font class="f2">'idfile'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;inf</font><font class="f3">=(</font><font class="f2">&quot;mapview input file&quot;</font><font class="f3">,</font><font class="f2">'positional'</font><font class="f3">,None,</font><font class="f4">str</font><font class="f3">,None,</font><font class="f2">'infile'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;v</font><font class="f3">=(</font><font class="f2">&quot;verbose output flag&quot;</font><font class="f3">,</font><font class="f2">'flag'</font><font class="f3">),</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;V</font><font class="f3">=(</font><font class="f2">&quot;mapview format flag&quot;</font><font class="f3">,</font><font class="f2">'flag'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f3">def</font><font class="f4"> </font><font class="f5">main</font><font class="f3">(</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;id1</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;id2</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;pos1</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;pos2</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;lin1</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;lin2</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;per</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;idf</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;inf</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;v</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;V</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;Extracts FASTA records from multi-mapview file.</font><font class="f1"><br></font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;The view file must be in its default state, sorted </font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;by position, for all options except -i1, -i2 &amp; -f, </font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;which require IDs with identical prefices (maq </font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;mangles long IDs, which must first be shortened to </font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;a minimal prefix) and presorting on the ID field.</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;The -V option allows selection of records from any</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;file of single-line records beginning with a space</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;delimited ID field. Fastq and view formats are</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;examples.</font><font class="f1"><br></font><font class="f2">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;startTime</font><font class="f3">=</font><font class="f4">time</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> v:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;&#092;nStart time: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">startTime</font><font class="f3">)+</font><font class="f2">&quot;&#092;n&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Define a few constants:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;ID</font><font class="f3">=0</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">REF</font><font class="f3">=1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;POS</font><font class="f3">=2</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A4</font><font class="f3">=3</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A5</font><font class="f3">=4</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A6</font><font class="f3">=5</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A7</font><font class="f3">=6</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A8</font><font class="f3">=7</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A9</font><font class="f3">=8</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A10</font><font class="f3">=9</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A11</font><font class="f3">=10</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A12</font><font class="f3">=11</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A13</font><font class="f3">=12</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">A14</font><font class="f3">=13</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;SEQ</font><font class="f3">=14</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">QUAL</font><font class="f3">=15</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Check that options are of only one type:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;mode</font><font class="f3">=</font><font class="f2">&quot;&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;modeOK</font><font class="f3">=True</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(not</font><font class="f4"> mode </font><font class="f3">and</font><font class="f4"> </font><font class="f3">(</font><font class="f4">id1 </font><font class="f3">or</font><font class="f4"> id2</font><font class="f3">))</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode</font><font class="f3">=</font><font class="f2">&quot;id&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">and</font><font class="f4"> </font><font class="f3">(</font><font class="f4">pos1 </font><font class="f3">or</font><font class="f4"> pos2</font><font class="f3">))</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modeOK</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">pos1 </font><font class="f3">or</font><font class="f4"> pos2</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode</font><font class="f3">=</font><font class="f2">&quot;pos&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">and</font><font class="f4"> </font><font class="f3">(</font><font class="f4">lin1 </font><font class="f3">or</font><font class="f4"> lin2</font><font class="f3">))</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modeOK</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">lin1 </font><font class="f3">or</font><font class="f4"> lin2</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode</font><font class="f3">=</font><font class="f2">&quot;lin&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">and</font><font class="f4"> idf</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modeOK</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">idf</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode</font><font class="f3">=</font><font class="f2">&quot;idf&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(not</font><font class="f4"> modeOK</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;options can only be of one set type, either id, position, line or file&quot;</font><font class="f4">;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit</font><font class="f3">(1)</font><font class="f4">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Set empty &lt;option&gt;2 to &lt;option&gt;1, and sort if necessary:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> id2: id2</font><font class="f3">=</font><font class="f4">id1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> id1: id1</font><font class="f3">=</font><font class="f4">id2</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> pos2: pos2</font><font class="f3">=</font><font class="f4">pos1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> pos1: pos1</font><font class="f3">=</font><font class="f4">pos2</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> lin2: lin2</font><font class="f3">=</font><font class="f4">lin1</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> lin1: lin1</font><font class="f3">=</font><font class="f4">lin2</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> pos2</font><font class="f3">&lt;</font><font class="f4">pos1: dum</font><font class="f3">=</font><font class="f4">pos2;pos2</font><font class="f3">=</font><font class="f4">pos1;pos1</font><font class="f3">=</font><font class="f4">dum;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> lin2</font><font class="f3">&lt;</font><font class="f4">lin1: dum</font><font class="f3">=</font><font class="f4">lin2;lin2</font><font class="f3">=</font><font class="f4">lin1;lin1</font><font class="f3">=</font><font class="f4">dum;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Variables global to program:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">global</font><font class="f4"> path </font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;path</font><font class="f3">=</font><font class="f4">os.getcwd</font><font class="f3">()</font><font class="f4"> </font><font class="f0"># path to working directory (for all i/o)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">global</font><font class="f4"> a</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;a</font><font class="f3">=0</font><font class="f4"> </font><font class="f0"># index of iterations</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Defaults, etc:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> per </font><font class="f3">==</font><font class="f4"> </font><font class="f3">None</font><font class="f4">: per </font><font class="f3">=</font><font class="f4"> </font><font class="f3">100000</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> v:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f2">&quot;&#092;nParameters:&quot;</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;&#092;ninf: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">inf</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;&#092;nid1: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">id1</font><font class="f3">)+</font><font class="f2">&quot;&#092;nid2: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">id2</font><font class="f3">)+</font><font class="f2">&quot;&#092;npos1: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">pos1</font><font class="f3">)+</font><font class="f2">&quot;&#092;npos2: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">pos2</font><font class="f3">)+</font><font class="f4"> &#092;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f2">&quot;&#092;nlin1: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">lin1</font><font class="f3">)+</font><font class="f2">&quot;&#092;nlin2: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">lin2</font><font class="f3">)+</font><font class="f2">&quot;&#092;nper: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">per</font><font class="f3">)+</font><font class="f2">&quot;&#092;nidf: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">idf</font><font class="f3">)</font><font class="f4"> &#092;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">+</font><font class="f2">&quot;&#092;n&#092;n&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Open infiles:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;infile</font><font class="f3">=</font><font class="f4">getinf</font><font class="f3">(</font><font class="f4">inf</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#######################################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0"># Finally ready to do the actual work:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#######################################</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#####################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">### Find ID Range ###</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#####################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;a</font><font class="f3">=0</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">==</font><font class="f4"> </font><font class="f2">&quot;id&quot;</font><font class="f3">)</font><font class="f4">: </font><font class="f0"># hunting for an ID range</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getvid</font><font class="f3">(</font><font class="f4">id1</font><font class="f3">,</font><font class="f4">id2</font><font class="f3">,</font><font class="f4">inf</font><font class="f3">,</font><font class="f4">per</font><font class="f3">,</font><font class="f4">v</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">############################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">### Find Position Range&nbsp;&nbsp;###</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">############################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">==</font><font class="f4"> </font><font class="f2">&quot;pos&quot;</font><font class="f3">)</font><font class="f4">: </font><font class="f0"># hunting for a position range:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># will be used to check eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> inrange:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> aLine:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=(</font><font class="f4">pos1</font><font class="f3">&lt;</font><font class="f4">pos</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">: </font><font class="f0"># eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inrange</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># just to drop through</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=False</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> inrange </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> atedge:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">SEQ</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> V: </font><font class="f0"># preserve the mapview format</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> aLine</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;&gt;&quot;</font><font class="f3">,</font><font class="f4">id</font><font class="f3">,</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">,</font><font class="f4">seq</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> aLine:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=(</font><font class="f4">pos2</font><font class="f3">&lt;</font><font class="f4">pos</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">: </font><font class="f0"># eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atedge</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># just to drop through&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#######################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">### Find Line Range ###</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">#######################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">==</font><font class="f4"> </font><font class="f2">&quot;lin&quot;</font><font class="f3">)</font><font class="f4">: </font><font class="f0"># hunting for a line range</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># will be used to check eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> a</font><font class="f3">&lt;</font><font class="f4">lin1:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> a</font><font class="f3">&lt;=</font><font class="f4">lin2:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">SEQ</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> V: </font><font class="f0"># preserve the mapview format</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> aLine</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;&gt;&quot;</font><font class="f3">,</font><font class="f4">id</font><font class="f3">,</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">,</font><font class="f4">seq</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">##############################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">### Find Matches from File ###</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f0">##############################</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">elif</font><font class="f4"> </font><font class="f3">(</font><font class="f4">mode </font><font class="f3">==</font><font class="f4"> </font><font class="f2">&quot;idf&quot;</font><font class="f3">)</font><font class="f4">:</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">try</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idfile</font><font class="f3">=</font><font class="f4">open</font><font class="f3">(</font><font class="f4">idf</font><font class="f3">,</font><font class="f2">'r'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">except</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f6">ex1</font><font class="f3">,</font><font class="f4">ex2</font><font class="f3">,</font><font class="f6">ex3</font><font class="f3">=</font><font class="f4">sys.exc_info</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;Something went wrong while opening the input ID file!&#092;nException =&quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">ex2</font><font class="f3">)+</font><font class="f2">&quot;&#092;n&#092;n&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit</font><font class="f3">(1)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iLine</font><font class="f3">=True</font><font class="f4"> </font><font class="f0"># check eof of ID input file</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineOK</font><font class="f3">=False</font><font class="f4"> </font><font class="f0"># does the line have a good ID?</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> </font><font class="f3">(</font><font class="f4">iLine </font><font class="f3">and</font><font class="f4"> aLine</font><font class="f3">)</font><font class="f4">: </font><font class="f0"># get the next ID</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iLine</font><font class="f3">=</font><font class="f4">idfile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> iLine: </font><font class="f0"># necessary to catch eof</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iLine</font><font class="f3">=</font><font class="f4">iLine.split</font><font class="f3">(</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">)[0]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineOK</font><font class="f3">=(</font><font class="f4">aLine.find</font><font class="f3">(</font><font class="f4">iLine</font><font class="f3">)</font><font class="f4"> </font><font class="f3">!=</font><font class="f4"> </font><font class="f3">-1)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=False</font><font class="f4"> </font><font class="f0"># bale out as no more ID's</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> </font><font class="f3">not</font><font class="f4"> lineOK: </font><font class="f0"># throw away lines when no match</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odometer</font><font class="f3">(</font><font class="f4">v</font><font class="f3">,</font><font class="f4">per</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineOK</font><font class="f3">=(</font><font class="f4">aLine.find</font><font class="f3">(</font><font class="f4">iLine</font><font class="f3">)</font><font class="f4"> </font><font class="f3">!=</font><font class="f4"> </font><font class="f3">-1)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">while</font><font class="f4"> aLine </font><font class="f3">and</font><font class="f4"> lineOK: </font><font class="f0"># keep all lines with matches</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> V: </font><font class="f0"># preserve the mapview format</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> aLine</font><font class="f3">,</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitLine</font><font class="f3">=</font><font class="f4">aLine.split</font><font class="f3">(</font><font class="f2">'&#092;t'</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">ID</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos</font><font class="f3">=</font><font class="f4">int</font><font class="f3">(</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">POS</font><font class="f3">])</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq</font><font class="f3">=</font><font class="f4">splitLine</font><font class="f3">[</font><font class="f4">SEQ</font><font class="f3">]</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">print</font><font class="f4"> </font><font class="f2">&quot;&gt;&quot;</font><font class="f3">,</font><font class="f4">id</font><font class="f3">,</font><font class="f2">&quot;&#092;n&quot;</font><font class="f3">,</font><font class="f4">seq</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aLine</font><font class="f3">=</font><font class="f4">infile.readline</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineOK</font><font class="f3">=(</font><font class="f4">aLine.find</font><font class="f3">(</font><font class="f4">iLine</font><font class="f3">)</font><font class="f4"> </font><font class="f3">!=</font><font class="f4"> </font><font class="f3">-1)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idfile.close</font><font class="f3">()</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">else</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f2">&quot;The mode was improperly set; check your parameters!&#092;n&#092;n&quot;</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;infile.close</font><font class="f3">()</font><font class="f1"><br></font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="f3">if</font><font class="f4"> v:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f2">&quot;&#092;nEnd getfv.&quot;</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;&#092;nTime: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">time</font><font class="f3">())</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg</font><font class="f3">=</font><font class="f2">&quot;&#092;nElapsed time: &quot;</font><font class="f3">+</font><font class="f4">str</font><font class="f3">(</font><font class="f4">time</font><font class="f3">()-</font><font class="f4">startTime</font><font class="f3">)+</font><font class="f2">&quot;&#092;n&#092;n&quot;</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write</font><font class="f3">(</font><font class="f4">msg</font><font class="f3">)</font><font class="f1"><br></font><font class="f1"><br></font><font class="f3">if</font><font class="f4"> __name__ </font><font class="f3">==</font><font class="f4"> </font><font class="f2">'__main__'</font><font class="f4">:</font><font class="f1"><br></font><font class="f4">&nbsp;&nbsp;&nbsp;&nbsp;plac.call</font><font class="f3">(</font><font class="f4">main</font><font class="f3">)<br></font></td>

      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="1"></td>
    </tr>
    <tr>
      <td colspan="5" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="4"></td>
    </tr>
</table>
<table summary="notebook cell" border="0" cellspacing="0" cellpadding="0" width="100%">
    <tr>
      <td width="20" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="20" height="1"></td>

       <td width="4" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="4" height="1"></td>
      
      <td valign="top"><nobr></nobr></td>      <td width="100%" valign="top"></td>

      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="1"></td>
    </tr>
    <tr>
      <td colspan="2" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="24" height="4"></td>
      <td colspan="2" width="100%" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="4"></td>
      <td width="8" valign="top"><img src="../images/_nbs.gif" alt="" border="0" width="8" height="4"></td>
    </tr>
</table>
      
    </td>
    
    <td width="7" valign="top"><img name="pagecurl_rt" src="../images/_nb_interface/pagecurlrt.gif" alt="" border="0" width="7" height="33" usemap="#pagecurlrtmap"><br>
<img src="../images/_nbs.gif" alt="" border="0" width="7" height="1"><br><img src="../images/_nbs.gif" alt="" border="0" width="7" height="1"></td>
    <td width="22" valign="top" background="../images/_nb_interface/rightpagesbg.png"><img src="../images/_nb_tabs/6tab.png" alt="" border="0" width="22" height="145" usemap="#tabmap"></td>
    <td width="1" bgcolor="#FFFFFF"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="1"></td>
  
  </tr>
  
  <tr>
    <td valign="top" colspan="6" bgcolor="#FFFFFF">
      <table summary="page bottom" border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
          <td width="15" height="5" align="left"><img src="../images/_nb_interface/bottomleftpagesnr.png" alt="" border="0" width="15" height="5"></td>
          <td background="../images/_nb_interface/bottompagesbg.png" align="right"><img src="../images/_nb_interface/bottomrightpages.png" alt="" border="0" width="20" height="5"></td>
          <td width="18"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="1"></td>
        </tr>
        <tr>
          <td colspan="3"><img src="../images/_nbs.gif" alt="" border="0" width="1" height="10"></td>
        </tr>
      </table>
    </td>
  </tr>
  
</table>   

<!-- /PAGE CONTENT -->
</body>
</html>

